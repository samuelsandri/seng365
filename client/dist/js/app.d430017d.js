(function(t){function e(e){for(var r,s,a=e[0],c=e[1],l=e[2],d=0,p=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],r=!0,a=1;a<i.length;a++){var c=i[a];0!==o[c]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},o={app:0},n=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var r=i("85ec"),o=i.n(r);o.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{attrs:{id:"inspire"}},[i("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[t.user.isLoggedIn?i("v-container",[i("v-row",{staticClass:"menuProfileContainer"},[i("v-avatar",{staticClass:"menuProfileAvatar"},[i("v-img",{attrs:{src:t.userProfilePicture()}},[t.hasPicture?t._e():i("v-icon",{attrs:{large:""}},[t._v("mdi-account")])],1)],1)],1),i("v-row",{staticClass:"menuProfileContainer"},[t._v(" "+t._s(t.user.name)+" ")])],1):t._e(),i("v-list",{attrs:{dense:""}},[t.user.isLoggedIn||"/Login"===t.$route.path?t._e():i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$router.push("/Login")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-login")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Login")])],1)],1),t.user.isLoggedIn||"/Login"!==t.$route.path?t._e():i("v-list-item",{staticClass:"menuItemSelected",attrs:{disabled:"",link:""},on:{click:function(e){return t.$router.push("/Login")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-login")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Login")])],1)],1),t.user.isLoggedIn||"/Signup"===t.$route.path?t._e():i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$router.push("/Signup")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-account-multiple-plus")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Sign Up")])],1)],1),t.user.isLoggedIn||"/Signup"!==t.$route.path?t._e():i("v-list-item",{staticClass:"menuItemSelected",attrs:{disabled:"",link:""},on:{click:function(e){return t.$router.push("/Signup")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-account-multiple-plus")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Sign Up")])],1)],1),t.user.isLoggedIn&&"/Profile"!==t.$route.path?i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$router.push("/Profile")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-account")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Profile")])],1)],1):t._e(),t.user.isLoggedIn&&"/Profile"===t.$route.path?i("v-list-item",{staticClass:"menuItemSelected",attrs:{disabled:"",link:""},on:{click:function(e){return t.$router.push("/Profile")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-account")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Profile")])],1)],1):t._e(),"/Petitions"!==t.$route.path?i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$router.push("/Petitions")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-poll")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Petitions")])],1)],1):t._e(),"/Petitions"===t.$route.path?i("v-list-item",{staticClass:"menuItemSelected",attrs:{disabled:"",link:""},on:{click:function(e){return t.$router.push("/Petitions")}}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-poll")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Petitions")])],1)],1):t._e(),t.user.isLoggedIn?i("v-list-item",{attrs:{link:""},on:{click:t.logout}},[i("v-list-item-action",[i("v-icon",[t._v("mdi-arrow-collapse-right")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Log Out")])],1)],1):t._e()],1)],1),i("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[i("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),i("v-toolbar-title",[t._v(t._s(this.$route.name))])],1),i("v-content",[i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("router-view")],1)],1),i("v-footer",{attrs:{color:"primary",app:""}},[i("span",{staticClass:"white--text"},[t._v("Â© 2020")])])],1)},n=[],s=i("5530"),a=(i("b0c0"),i("8c4f")),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loginContainer"},[i("v-snackbar",{attrs:{color:"error",top:"",timeout:5e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.errorMsg)+" ")]),i("v-form",{staticClass:"loginForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.emailRules,label:"Email",required:"",outlined:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),i("v-text-field",{attrs:{rules:t.passwordRules,label:"Password",required:"",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),i("v-btn",{attrs:{color:"success",disabled:!t.valid},on:{click:t.loginUser}},[t._v("Login")])],1)],1)},l=[],u=i("bc3a"),d=i.n(u),p="http://localhost:4941/api/v1",v=d.a.create({baseURL:p,timeout:5e3,headers:{"X-Authorization":localStorage.sessionId}}),g={refreshInstance:function(){v=d.a.create({baseURL:p,timeout:5e3,headers:{"X-Authorization":localStorage.sessionId}})},createUser:function(t){return v.post("/users/register",t)},login:function(t,e){return v.post("/users/login",{email:t,password:e})},logout:function(){return v.post("/users/logout")},getUser:function(t){return v.get("/users/"+t)},addProfilePicture:function(t,e,i){return v.put("/users/"+t+"/photo",e,{headers:{"Content-Type":i}})},getProfilePicture:function(t){return v.get("/users/"+t+"/photo")},removeProfilePicture:function(t){return v.delete("/users/"+t+"/photo")},editUser:function(t,e){return v.patch("/users/"+t,e)},editUserNewPassword:function(t,e,i,r,o,n,s){return v.patch("/users/"+t,{name:e,email:i,password:r,currentPassword:o,city:n,country:s})}},f={getDetailedPetition:function(t){return v.get("/petitions/"+t)},getPetitionSignatures:function(t){return v.get("petitions/"+t+"/signatures")},getPetitions:function(){return v.get("/petitions")},getPetitionsFiltered:function(t){return v.get("/petitions?"+t)},getCategories:function(){return v.get("/petitions/categories")},createPetition:function(t,e,i,r){return v.post("/petitions",{title:t,description:e,categoryId:i,closingDate:r})},createPetitionNoDate:function(t,e,i){return v.post("/petitions",{title:t,description:e,categoryId:i})},signPetition:function(t){return v.post("/petitions/"+t+"/signatures")},patchPetition:function(t,e,i,r,o){return v.patch("/petitions/"+t,{title:e,description:i,categoryId:r,closingDate:o})},patchPetitionNoDate:function(t,e,i,r){return v.patch("/petitions/"+t,{title:e,description:i,categoryId:r})},deletePetition:function(t){return v.delete("/petitions/"+t)},addPetitionSignature:function(t){return v.post("/petitions/"+t+"/signatures")},deletePetitionSignature:function(t){return v.delete("/petitions/"+t+"/signatures")},addHeroImage:function(t,e,i){return v.put("/petitions/"+t+"/photo",e,{headers:{"Content-Type":i}})},removeHeroImage:function(t){return v.delete("/petitions/"+t+"/photo")}},h=i("2f62"),m={name:"Login",data:function(){return{email:null,password:null,valid:!1,emailRules:[function(t){return!!t||"E-mail is required"}],passwordRules:[function(t){return!!t||"Password is required"}],snackbar:!1,errorMsg:""}},computed:Object(s["a"])({},Object(h["c"])(["user"])),methods:Object(s["a"])(Object(s["a"])({},Object(h["b"])(["setUserId","userLogin","createUser","setUserProfilePicture"])),{},{loginUser:function(){var t=this;g.login(this.email,this.password).then((function(e){t.setUserId(e.data),t.userLogin(),localStorage.setItem("userId",e.data.userId),localStorage.setItem("sessionId",e.data.token),g.refreshInstance(),t.getLoggedInUser(),st.push("Profile")})).catch((function(e){t.errorMsg=e.response.statusText,t.snackbar=!0}))},getLoggedInUser:function(){var t=this;g.getUser(this.user.userId).then((function(e){t.createUser(e.data)}))}})},b=m,P=i("2877"),y=Object(P["a"])(b,c,l,!1,null,"e2509a72",null),_=y.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loginContainer"},[i("v-snackbar",{attrs:{color:"error",top:"",timeout:5e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.errorMsg)+" ")]),i("v-form",{staticClass:"loginForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.nameRules,label:"Name",required:"",outlined:""},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}}),i("v-text-field",{attrs:{rules:t.emailRules,label:"Email",required:"",outlined:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),i("v-text-field",{attrs:{rules:t.passwordRules,type:"password",label:"Password",required:"",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),i("v-text-field",{attrs:{label:"City",outlined:""},model:{value:t.user.city,callback:function(e){t.$set(t.user,"city",e)},expression:"user.city"}}),i("v-text-field",{attrs:{label:"Country",outlined:""},model:{value:t.user.country,callback:function(e){t.$set(t.user,"country",e)},expression:"user.country"}}),i("v-btn",{attrs:{disabled:!t.valid},on:{click:t.createUser}},[t._v("Sign Up")])],1)],1)},C=[],k=(i("ac1f"),i("466d"),{name:"SignUp",data:function(){return{valid:!1,password:null,emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],nameRules:[function(t){return!!t||"Name is required"},function(t){return t.length<=20||"Name must be less than 20 characters"}],passwordRules:[function(t){return!!t||"Password is required"}],snackbar:!1,errorMsg:""}},computed:Object(s["a"])({},Object(h["c"])(["user"])),methods:Object(s["a"])(Object(s["a"])({},Object(h["b"])(["setUserId","userLogin"])),{},{createUser:function(){var t=this,e={name:this.user.name,email:this.user.email,password:this.password};this.isEmptyOrSpaces(this.user.city)||(e["city"]=this.user.city),this.isEmptyOrSpaces(this.user.country)||(e["country"]=this.user.country),g.createUser(e).then((function(e){t.setUserId(e.data.userId),t.loginUser()})).catch((function(e){t.errorMsg=e.response.statusText,t.snackbar=!0}))},loginUser:function(){var t=this;g.login(this.user.email,this.password).then((function(e){localStorage.setItem("userId",e.data.userId),localStorage.setItem("sessionId",e.data.token),t.setUserId(e.data),t.userLogin(),g.refreshInstance(),st.push("/Profile")}))},isEmptyOrSpaces:function(t){return null===t||null!==t.match(/^ *$/)}})}),S=k,w=Object(P["a"])(S,I,C,!1,null,"6a3f46e6",null),D=w.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-snackbar",{attrs:{color:"error",top:"",timeout:5e3},model:{value:t.errorSnackbar,callback:function(e){t.errorSnackbar=e},expression:"errorSnackbar"}},[t._v(" "+t._s(t.errorMsg)+" ")]),i("v-snackbar",{attrs:{color:"info",top:"",timeout:5e3},model:{value:t.successSnackbar,callback:function(e){t.successSnackbar=e},expression:"successSnackbar"}},[t._v(" "+t._s(t.successMsg)+" ")]),i("v-row",[i("v-col",[i("v-card",[i("v-row",[i("v-col",[i("h2",{staticClass:"profileHeader"},[t._v("Profile Details")])]),i("v-col",{attrs:{cols:"2"}},[i("v-row",{staticClass:"profileEditButton",attrs:{justify:"end"}},[i("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-btn",t._g({attrs:{color:"info"}},r),[t._v("Edit Profile")])]}}]),model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[i("v-card",[i("v-card-title",[t._v("Edit Profile")]),i("v-divider",{staticClass:"popupCardDivider"}),i("v-card-text",[i("v-text-field",{attrs:{clearable:"",outlined:"",label:"Name"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}}),i("v-text-field",{attrs:{clearable:"",outlined:"",label:"Email"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),i("v-text-field",{attrs:{clearable:"",outlined:"",label:"City"},model:{value:t.user.city,callback:function(e){t.$set(t.user,"city",e)},expression:"user.city"}}),i("v-text-field",{attrs:{clearable:"",outlined:"",label:"Country"},model:{value:t.user.country,callback:function(e){t.$set(t.user,"country",e)},expression:"user.country"}}),i("v-text-field",{attrs:{type:"password",clearable:"",outlined:"",label:"New Password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),t.isEmptyOrSpaces(t.newPassword)?t._e():i("v-text-field",{attrs:{type:"password",clearable:"",outlined:"",label:"Current Password"},model:{value:t.currentPassword,callback:function(e){t.currentPassword=e},expression:"currentPassword"}}),i("v-btn",{attrs:{color:"success"},on:{click:[function(e){t.editDialog=!1},t.editProfile]}},[t._v("Submit")])],1)],1)],1)],1)],1)],1),i("v-divider",{staticClass:"cardDivider"}),i("v-row",{attrs:{align:"start",justify:"start"}},[i("v-col",{staticClass:"profilePictureCol",attrs:{cols:"3"}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-avatar",{staticClass:"profileAvatar"},[i("v-img",{attrs:{id:"profileImg",src:t.userProfilePicture()}},[t.hasPicture?t._e():i("v-icon",{attrs:{"x-large":""}},[t._v("mdi-account")])],1)],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-btn",t._g({staticClass:"editImageButton",attrs:{color:"info"}},r),[t._v("Edit Image")])]}}]),model:{value:t.profilePictureDialog,callback:function(e){t.profilePictureDialog=e},expression:"profilePictureDialog"}},[i("v-card",[i("v-card-title",[t._v("Edit Profile Picture")]),i("v-divider",{staticClass:"popupCardDivider"}),i("v-card-text",[i("v-form",[i("v-file-input",{attrs:{label:"Profile Picture","prepend-icon":"mdi-camera",outlined:"","show-size":"",clearable:"",accept:"image/jpg,image/jpeg,image/gif,image/png"},model:{value:t.profilePicture,callback:function(e){t.profilePicture=e},expression:"profilePicture"}}),i("v-btn",{attrs:{color:"success"},on:{click:[function(e){t.profilePictureDialog=!1},t.setProfilePicture]}},[t._v("Save")]),i("v-btn",{staticClass:"formSecondButton",attrs:{color:"error"},on:{click:[function(e){t.profilePictureDialog=!1},t.removeProfilePicture]}},[t._v("Remove")])],1)],1)],1)],1)],1)],1),i("v-col",[i("h3",[t._v(t._s(t.user.name))]),i("p",{staticClass:"profileInfoLabel"},[t._v("Email: "+t._s(t.user.email))]),i("p",{staticClass:"profileInfoLabel"},[t._v("Location: "+t._s(t.user.city)+", "+t._s(t.user.country))])])],1)],1)],1)],1),i("v-row",[i("v-col",[i("v-card",[i("v-row",[i("v-col",{attrs:{cols:"2"}},[i("h2",{staticClass:"profileHeader"},[t._v("My Petitions")])]),i("v-col",[i("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-btn",t._g({attrs:{color:"success"}},r),[t._v("Create Petition")])]}}]),model:{value:t.createPetitionDialog,callback:function(e){t.createPetitionDialog=e},expression:"createPetitionDialog"}},[i("v-card",[i("v-card-title",[t._v("Create Petition")]),i("v-divider",{staticClass:"popupCardDivider"}),i("v-card-text",[i("v-form",[i("v-text-field",{attrs:{clearable:"",outlined:"",label:"Title"},model:{value:t.petitionTitle,callback:function(e){t.petitionTitle=e},expression:"petitionTitle"}}),i("v-textarea",{attrs:{clearable:"",outlined:"",label:"Description"},model:{value:t.petitionDescription,callback:function(e){t.petitionDescription=e},expression:"petitionDescription"}}),i("v-overflow-btn",{attrs:{outlined:"",items:t.categories,label:"Category"},model:{value:t.petitionCategory,callback:function(e){t.petitionCategory=e},expression:"petitionCategory"}}),i("v-label",[t._v("Closing Date: ")]),i("v-date-picker",{staticClass:"formSecondButton",model:{value:t.petitionEndDate,callback:function(e){t.petitionEndDate=e},expression:"petitionEndDate"}}),i("br"),i("br"),i("v-btn",{attrs:{color:"success"},on:{click:[function(e){t.createPetitionDialog=!1},t.createNewPetition]}},[t._v("Create")])],1)],1)],1)],1)],1)],1),i("v-divider",{staticClass:"cardDivider"}),i("v-card-text",[i("v-row",[i("v-col",{attrs:{cols:"3"}},[i("h4",[t._v("Title")])]),i("v-col",[i("h4",[t._v("Category")])]),i("v-col",[i("h4",[t._v("Author")])]),i("v-col",[i("h4",[t._v("Signatures")])]),i("v-col")],1),t._l(t.petitions,(function(e,r){return i("v-row",{key:r,attrs:{align:"center",justify:"center"}},[i("v-col",{attrs:{cols:"3"}},[i("a",{on:{click:function(i){return t.goToPetition(e.petitionId)}}},[t._v(t._s(e.title))])]),i("v-col",[i("p",{staticClass:"profileInfoLabel"},[t._v(t._s(e.category))])]),i("v-col",[i("p",{staticClass:"profileInfoLabel"},[t._v(t._s(e.authorName))])]),i("v-col",[i("v-row",{attrs:{align:"center"}},[i("v-icon",{attrs:{color:"primary"}},[t._v("mdi-pen")]),i("h2",[t._v(t._s(e.signatureCount))])],1)],1),i("v-col",[i("v-btn",{attrs:{color:"error"},on:{click:function(i){return t.deletePetition(e.petitionId)}}},[t._v("Delete")])],1)],1)}))],2)],1)],1)],1)],1)},O=[],j=i("b85c"),E={name:"Profile",data:function(){return{petitions:[],petitionTitle:null,petitionDescription:null,petitionCategory:null,petitionEndDate:null,categories:[],categoriesDict:{},newPassword:null,currentPassword:null,profilePicture:null,hasPicture:!1,editDialog:!1,profilePictureDialog:!1,createPetitionDialog:!1,editProfileValid:!1,createPetitionValid:!1,emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],nameRules:[function(t){return!!t||"Name is required"},function(t){return t.length<=20||"Name must be less than 20 characters"}],passwordRules:[function(t){return!!t||"Password is required"}],errorSnackbar:!1,errorMsg:"",successSnackbar:!1,successMsg:""}},mounted:function(){this.getFilteredPetitions(),this.getPetitionCategories()},watch:{"$route.params":{handler:function(){this.getFilteredPetitions(),this.getPetitionCategories()}}},computed:Object(s["a"])({},Object(h["c"])(["user"])),methods:{getFilteredPetitions:function(){var t=this,e="authorId="+this.user.userId;f.getPetitionsFiltered(e).then((function(e){t.petitions=e.data}))},getPetitionCategories:function(){var t=this;f.getCategories().then((function(e){var i,r=Object(j["a"])(e.data);try{for(r.s();!(i=r.n()).done;){var o=i.value;t.categories.push(o.name),t.categoriesDict[o.name]=o.categoryId}}catch(n){r.e(n)}finally{r.f()}}))},goToPetition:function(t){st.push("/petitions/"+t)},createNewPetition:function(){var t=this;this.isEmptyOrSpaces(this.petitionEndDate)?f.createPetitionNoDate(this.petitionTitle,this.petitionDescription,this.categoriesDict[this.petitionCategory]).then((function(e){t.successMsg="Created",t.successSnackbar=!0,f.signPetition(e.data.petitionId).then((function(){t.getFilteredPetitions()}))})).catch((function(e){t.errorMsg=e.response.statusText,t.errorSnackbar=!0})):f.createPetition(this.petitionTitle,this.petitionDescription,this.categoriesDict[this.petitionCategory],this.petitionEndDate).then((function(e){t.successMsg="Created",t.successSnackbar=!0,f.signPetition(e.data.petitionId).then((function(){t.getFilteredPetitions()}))})).catch((function(e){t.errorMsg=e.response.statusText,t.errorSnackbar=!0}))},setProfilePicture:function(){var t=this;console.log(this.profilePicture),null!==this.profilePicture&&g.addProfilePicture(this.user.userId,this.profilePicture,"image/jpeg").then((function(){location.reload()})).catch((function(e){t.errorMsg=e.response.statusText,t.errorSnackbar=!0}))},removeProfilePicture:function(){g.removeProfilePicture(this.user.userId).then((function(){location.reload()}))},isEmptyOrSpaces:function(t){return null===t||null!==t.match(/^ *$/)},editProfile:function(){var t=this,e={name:this.user.name,email:this.user.email};this.isEmptyOrSpaces(this.newPassword)||(e["password"]=this.newPassword,e["currentPassword"]=this.currentPassword),this.isEmptyOrSpaces(this.user.city)||(e["city"]=this.user.city),this.isEmptyOrSpaces(this.user.country)||(e["country"]=this.user.country),g.editUser(this.user.userId,e).then((function(){t.successMsg="Saved",t.successSnackbar=!0})).catch((function(e){t.errorMsg=e.response.statusText,t.errorSnackbar=!0}))},userProfilePicture:function(){return this.hasProfilePicture(),"http://localhost:4941/api/v1/users/"+this.user.userId+"/photo"},hasProfilePicture:function(){var t=this;g.getProfilePicture(this.user.userId).then((function(){t.hasPicture=!0})).catch((function(){t.hasPicture=!1}))},deletePetition:function(t){var e=this;f.deletePetition(t).then((function(){e.getFilteredPetitions(),e.successMsg="Deleted",e.successSnackbar=!0}))}}},L=E,T=Object(P["a"])(L,x,O,!1,null,"13d03fbf",null),$=T.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-row",[i("v-col",[i("v-card",{staticClass:"petitionsCard"},[i("v-row",[i("v-col",[i("h3",[t._v("Search")]),i("v-text-field",{attrs:{outlined:"",label:"Search"},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}})],1),i("v-col",[i("h3",[t._v("Filter")]),i("v-overflow-btn",{attrs:{outlined:"",items:t.categories,label:"Categories"},model:{value:t.chosenCategory,callback:function(e){t.chosenCategory=e},expression:"chosenCategory"}})],1),i("v-col",[i("h3",[t._v("Sort")]),i("v-overflow-btn",{attrs:{outlined:"",items:t.sortTypes,label:"Sort By"},model:{value:t.chosenSortType,callback:function(e){t.chosenSortType=e},expression:"chosenSortType"}})],1)],1),i("v-row",[i("v-btn",{staticClass:"petitionsButton",attrs:{color:"success"},on:{click:t.search}},[t._v("Search")]),i("v-btn",{staticClass:"petitionsButton",attrs:{color:"error"},on:{click:t.clearSearch}},[t._v("Clear Search")])],1)],1)],1)],1),i("v-row",[i("v-col",[i("v-card",{staticClass:"petitionsCard"},[t.petitions.length>0?i("v-row",{attrs:{"no-gutters":""}},t._l(t.petitions,(function(e,r){return i("v-card",{key:r,staticClass:"petitionInfoCard",attrs:{tile:"",outlined:""}},[i("v-card-text",[i("a",{staticClass:"petitionLink",on:{click:function(i){return t.goToPetition(e.petitionId)}}},[t._v(t._s(e.title))]),i("br"),i("p",[t._v("Category: "+t._s(e.category)),i("br"),t._v("Author: "+t._s(e.authorName))]),i("v-row",{staticClass:"signatures",attrs:{justify:"end",align:"center"}},[t.signedPetitions.includes(e.petitionId)?i("v-icon",{attrs:{color:"primary"},on:{click:function(i){return t.toggleSignature(e.petitionId)}}},[t._v("mdi-pen")]):t._e(),t.signedPetitions.includes(e.petitionId)?t._e():i("v-icon",{on:{click:function(i){return t.toggleSignature(e.petitionId)}}},[t._v("mdi-pen")]),i("h2",[t._v(t._s(e.signatureCount))])],1)],1)],1)})),1):t._e(),0===t.petitions.length?i("v-row",[i("h3",{staticClass:"profileHeader"},[t._v("No Petitions Found")])]):t._e()],1)],1)],1),i("v-row",[i("v-col",[i("v-card",[i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-btn",{staticClass:"pageNavButton",attrs:{color:"info",disabled:1===t.pageNumber},on:{click:t.firstPage}},[t._v("First")]),i("v-btn",{staticClass:"pageNavButton",attrs:{color:"info",disabled:1===t.pageNumber},on:{click:t.prevPage}},[t._v("Prev")]),i("h3",{staticClass:"pageNavHeader"},[t._v(t._s((t.pageNumber-1)*t.pageAmountShown+1+"-"+t.pageNumber*t.pageAmountShown))]),i("v-btn",{staticClass:"pageNavButton",attrs:{color:"info",disabled:this.petitions.length<10},on:{click:t.nextPage}},[t._v("Next")]),i("v-btn",{staticClass:"pageNavButton",attrs:{color:"info",disabled:this.petitions.length<10},on:{click:t.lastPage}},[t._v("Last")])],1)],1)],1)],1)],1)},U=[],A=(i("caad"),{name:"Petitions",data:function(){return{petitions:[],searchTerm:null,sortTypes:["Alphabetically by title, A-Z","Alphabetically by title, Z-A","Number of signatures, most to least","Number of signatures, least to most"],categories:[],categoriesDict:{},chosenCategory:null,chosenSortType:"Number of signatures, most to least",pageNumber:1,pageAmountShown:10,signedPetitions:[]}},mounted:function(){this.getFilteredPetitions(),this.getPetitionCategories(),this.updateSignedPetitions()},watch:{"$route.params":{handler:function(){this.getFilteredPetitions(),this.getPetitionCategories(),this.updateSignedPetitions()}}},computed:Object(s["a"])({},Object(h["c"])(["user"])),methods:{search:function(){this.pageNumber=1,this.getFilteredPetitions()},getFilteredPetitions:function(){var t=this,e=!0,i="";this.isEmptyOrSpaces(this.searchTerm)||(e=!1,i+="q="+this.searchTerm),this.isEmptyOrSpaces(this.chosenCategory)||(e?e=!1:i+="&",i+="categoryId="+this.categoriesDict[this.chosenCategory]),"Alphabetically by title, A-Z"===this.chosenSortType?(e?e=!1:i+="&",i+="sortBy=ALPHABETICAL_ASC"):"Alphabetically by title, Z-A"===this.chosenSortType?(e?e=!1:i+="&",i+="sortBy=ALPHABETICAL_DESC"):"Number of signatures, least to most"===this.chosenSortType&&(e?e=!1:i+="&",i+="sortBy=SIGNATURES_ASC"),e?e=!1:i+="&",i+="startIndex="+(this.pageNumber-1)*this.pageAmountShown+"&count="+this.pageAmountShown,f.getPetitionsFiltered(i).then((function(e){t.petitions=e.data,t.updateSignedPetitions()}))},isEmptyOrSpaces:function(t){return null===t||null!==t.match(/^ *$/)},clearSearch:function(){this.searchTerm=null,this.chosenCategory=null,this.chosenSortType="Number of signatures, most to least",this.getFilteredPetitions()},getPetitionCategories:function(){var t=this;f.getCategories().then((function(e){var i,r=Object(j["a"])(e.data);try{for(r.s();!(i=r.n()).done;){var o=i.value;t.categories.push(o.name),t.categoriesDict[o.name]=o.categoryId}}catch(n){r.e(n)}finally{r.f()}}))},nextPage:function(){10===this.petitions.length&&(this.pageNumber+=1,this.getFilteredPetitions())},prevPage:function(){1!==this.pageNumber&&(this.pageNumber-=1),this.getFilteredPetitions()},firstPage:function(){this.pageNumber=1,this.getFilteredPetitions()},lastPage:function(){},goToPetition:function(t){st.push("/petitions/"+t)},updateSignedPetitions:function(){var t=this;this.signedPetitions=[];var e,i=Object(j["a"])(this.petitions);try{var r=function(){var i=e.value;f.getPetitionSignatures(i.petitionId).then((function(e){var r,o=[],n=Object(j["a"])(e.data);try{for(n.s();!(r=n.n()).done;){var s=r.value;o.push(s.signatoryId)}}catch(a){n.e(a)}finally{n.f()}o.includes(t.user.userId)&&t.signedPetitions.push(i.petitionId)}))};for(i.s();!(e=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}},toggleSignature:function(t){var e=this;f.getPetitionSignatures(t).then((function(i){var r,o=[],n=Object(j["a"])(i.data);try{for(n.s();!(r=n.n()).done;){var s=r.value;o.push(s.signatoryId)}}catch(a){n.e(a)}finally{n.f()}o.includes(e.user.userId)?f.deletePetitionSignature(t).then((function(){e.getFilteredPetitions()})):f.addPetitionSignature(t).then((function(){e.getFilteredPetitions()}))}))}}}),M=A,F=Object(P["a"])(M,N,U,!1,null,"74148f59",null),B=F.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-snackbar",{attrs:{color:"error",top:"",timeout:5e3},model:{value:t.errorSnackbar,callback:function(e){t.errorSnackbar=e},expression:"errorSnackbar"}},[t._v(" "+t._s(t.errorMsg)+" ")]),i("v-snackbar",{attrs:{color:"info",top:"",timeout:5e3},model:{value:t.successSnackbar,callback:function(e){t.successSnackbar=e},expression:"successSnackbar"}},[t._v(" "+t._s(t.successMsg)+" ")]),i("v-row",[i("v-col",[i("v-card",{attrs:{"max-width":"800px"}},[i("v-img",{attrs:{src:t.petitionImage()}}),i("v-card-title",[t._v(t._s(t.petition.title))]),i("v-card-text",[i("p",[t._v(t._s(t.petition.description))]),i("h4",[t._v("Category: "+t._s(t.petition.category))]),i("br"),i("h5",[t._v("Created: "+t._s(t.petition.createdDate))]),i("h5",[t._v("Closes: "+t._s(t.petition.closingDate))]),i("v-row",{staticClass:"signatures",attrs:{justify:"end",align:"center"}},[this.signedPetition?i("v-icon",{attrs:{color:"primary"},on:{click:function(e){return t.toggleSignature(t.petition.petitionId)}}},[t._v("mdi-pen")]):t._e(),this.signedPetition?t._e():i("v-icon",{on:{click:function(e){return t.toggleSignature(t.petition.petitionId)}}},[t._v("mdi-pen")]),i("h2",[t._v(t._s(t.petition.signatureCount))])],1)],1)],1)],1),i("v-col",[i("v-row",[i("v-col",{staticClass:"leftColCard"},[i("v-card",[i("v-card-title",[t._v("Author")]),i("v-divider",{staticClass:"cardDivider"}),i("v-row",{staticClass:"menuProfileContainer"},[i("v-avatar",{staticClass:"menuProfileAvatar"},[i("v-img",{attrs:{src:t.authorProfilePicture()}},[t.hasPicture?t._e():i("v-icon",{attrs:{large:""}},[t._v("mdi-account")])],1)],1)],1),i("v-card-text",[i("h3",[t._v(t._s(t.petition.authorName))]),i("p",[t._v("Location: "+t._s(t.petition.authorCity)+", "+t._s(t.petition.authorCountry))])])],1)],1)],1),i("v-row",[i("v-col",{staticClass:"leftColCard"},[i("v-card",[i("v-card-title",[t._v("Share")]),i("v-divider",{staticClass:"cardDivider"}),i("v-row",[i("v-col",[i("FacebookButton",{staticClass:"profileHeader",attrs:{url:"",desciption:t.facebookDescription}}),i("br"),i("TwitterButton",{staticClass:"profileHeader"}),i("br"),i("RedditButton",{staticClass:"profileHeader"})],1)],1)],1)],1)],1),t.petition.authorId===t.user.userId?i("v-row",[i("v-col",{staticClass:"leftColCard"},[i("v-card",[i("v-card-title",[t._v("Manage")]),i("v-divider",{staticClass:"cardDivider"}),i("v-row",[i("v-col",[i("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-btn",t._g({staticClass:"profileHeader",attrs:{color:"info"}},r),[t._v("Edit Petition")])]}}],null,!1,3091188212),model:{value:t.editPetitionDialog,callback:function(e){t.editPetitionDialog=e},expression:"editPetitionDialog"}},[i("v-card",[i("v-card-title",[t._v("Edit Petition")]),i("v-divider",{staticClass:"popupCardDivider"}),i("v-card-text",[i("v-form",[i("v-text-field",{attrs:{outlined:"",label:"Title"},model:{value:t.petitionTitle,callback:function(e){t.petitionTitle=e},expression:"petitionTitle"}}),i("v-textarea",{attrs:{outlined:"",label:"Description"},model:{value:t.petitionDescription,callback:function(e){t.petitionDescription=e},expression:"petitionDescription"}}),i("v-overflow-btn",{attrs:{outlined:"",items:t.categories,label:"Category"},model:{value:t.petitionCategory,callback:function(e){t.petitionCategory=e},expression:"petitionCategory"}}),i("v-label",[t._v("Closing Date: ")]),i("v-date-picker",{staticClass:"formSecondButton",model:{value:t.petitionEndDate,callback:function(e){t.petitionEndDate=e},expression:"petitionEndDate"}}),i("br"),i("br"),i("v-btn",{attrs:{color:"success"},on:{click:[function(e){t.editPetitionDialog=!1},t.editPetition]}},[t._v("Save")])],1)],1)],1)],1),i("br"),i("br"),i("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-btn",t._g({staticClass:"profileHeader",attrs:{color:"info"}},r),[t._v("Edit Image")])]}}],null,!1,3583736871),model:{value:t.heroImageDialog,callback:function(e){t.heroImageDialog=e},expression:"heroImageDialog"}},[i("v-card",[i("v-card-title",[t._v("Edit Hero Image")]),i("v-divider",{staticClass:"popupCardDivider"}),i("v-card-text",[i("v-form",[i("v-file-input",{attrs:{label:"Hero Image","prepend-icon":"mdi-camera",outlined:"","show-size":"",clearable:"",accept:"image/jpg,image/jpeg,image/gif,image/png"},model:{value:t.heroImage,callback:function(e){t.heroImage=e},expression:"heroImage"}}),i("v-btn",{attrs:{color:"success"},on:{click:[function(e){t.heroImageDialog=!1},t.setHeroImage]}},[t._v("Save")])],1)],1)],1)],1),i("br"),i("br"),i("v-btn",{staticClass:"profileHeader",attrs:{color:"error"},on:{click:t.deletePetition}},[t._v("Delete Petition")])],1)],1)],1)],1)],1):t._e()],1)],1),i("v-row",[i("v-col",[i("v-card",[i("v-card-title",[t._v("Signatures")]),i("v-divider",{staticClass:"cardDivider"}),i("v-row",{attrs:{align:"center"}},[i("v-col",{attrs:{cols:"1"}}),i("v-col",[i("h4",{staticClass:"profileInfoLabel"},[t._v("Name")])]),i("v-col",[i("h4",{staticClass:"profileInfoLabel"},[t._v("Location")])])],1),t._l(t.petitionSignatories,(function(e,r){return i("v-row",{key:r,attrs:{align:"center"}},[i("v-col",{attrs:{cols:"1"}},[i("v-avatar",{staticClass:"signatoryProfileAvatar"},[i("v-img",{attrs:{src:t.signatoryProfilePicture(e.signatoryId)}})],1)],1),i("v-col",[i("p",{staticClass:"profileInfoLabel"},[t._v(t._s(e.name))])]),i("v-col",[i("p",{staticClass:"profileInfoLabel"},[t._v(t._s(e.city)+", "+t._s(e.country))])])],1)}))],2)],1)],1)],1)},R=[],q=(i("a4d3"),i("e01a"),i("c791")),z=i("2f38"),Z=i("f83e"),J={name:"Petition",components:{TwitterButton:q["a"],RedditButton:z["a"],FacebookButton:Z["a"]},data:function(){return{petition:null,petitionSignatories:[],facebookDescription:document.location.href,petitionTitle:null,petitionDescription:null,petitionCategory:null,petitionCategoryId:null,petitionEndDate:null,categories:[],categoriesDict:{},signedPetition:!1,hasPicture:!1,editPetitionDialog:!1,heroImage:null,heroImageDialog:!1,errorSnackbar:!1,errorMsg:"",successSnackbar:!1,successMsg:""}},mounted:function(){this.getPetitionDetails(),this.getPetitionCategories()},watch:{"$route.params":{handler:function(){this.getPetitionDetails(),this.getPetitionCategories()}}},computed:Object(s["a"])({},Object(h["c"])(["user"])),methods:{getPetitionDetails:function(){var t=this;f.getDetailedPetition(this.$route.params.petitionId).then((function(e){t.petition=e.data,t.petitionTitle=e.data.title,t.petitionDescription=e.data.description,t.petitionCategoryId=e.data.categoryId})),f.getPetitionSignatures(this.$route.params.petitionId).then((function(e){t.petitionSignatories=e.data;var i,r=[],o=Object(j["a"])(e.data);try{for(o.s();!(i=o.n()).done;){var n=i.value;r.push(n.signatoryId)}}catch(s){o.e(s)}finally{o.f()}t.signedPetition=r.includes(t.user.userId)}))},getPetitionCategories:function(){var t=this;f.getCategories().then((function(e){var i,r=Object(j["a"])(e.data);try{for(r.s();!(i=r.n()).done;){var o=i.value;t.categories.push(o.name),t.categoriesDict[o.name]=o.categoryId}}catch(n){r.e(n)}finally{r.f()}t.petitionCategory=t.categoriesDict[t.petitionCategoryId]}))},editPetition:function(){var t=this;this.isEmptyOrSpaces(this.petitionEndDate)?f.patchPetitionNoDate(this.$route.params.petitionId,this.petitionTitle,this.petitionDescription,this.categoriesDict[this.petitionCategory]).then((function(){t.getPetitionDetails(),t.successMsg="Saved",t.successSnackbar=!0})).catch((function(e){t.errorMsg=e.response.statusText,t.errorSnackbar=!0})):f.patchPetition(this.$route.params.petitionId,this.petitionTitle,this.petitionDescription,this.categoriesDict[this.petitionCategory],this.petitionEndDate).then((function(){t.getPetitionDetails(),t.successMsg="Saved",t.successSnackbar=!0})).catch((function(e){t.errorMsg=e.response.statusText,t.errorSnackbar=!0}))},deletePetition:function(){f.deletePetition(this.$route.params.petitionId).then((function(){st.push("/Profile")}))},isEmptyOrSpaces:function(t){return null===t||null!==t.match(/^ *$/)},toggleSignature:function(t){var e=this;f.addPetitionSignature(t).then((function(){e.getPetitionDetails()})).catch((function(i){403===i.response.status&&f.deletePetitionSignature(t).then((function(){e.getPetitionDetails()}))}))},petitionImage:function(){return"http://localhost:4941/api/v1/petitions/"+this.$route.params.petitionId+"/photo"},authorProfilePicture:function(){return this.hasProfilePicture(),"http://localhost:4941/api/v1/users/"+this.petition.authorId+"/photo"},hasProfilePicture:function(){var t=this;g.getProfilePicture(this.petition.authorId).then((function(){t.hasPicture=!0})).catch((function(){t.hasPicture=!1}))},signatoryProfilePicture:function(t){return"http://localhost:4941/api/v1/users/"+t+"/photo"},setHeroImage:function(){null!==this.heroImage&&f.addHeroImage(this.$route.params.petitionId,this.heroImage,"image/jpeg").then((function(){location.reload()}))}}},V=J,X=Object(P["a"])(V,H,R,!1,null,"54d63759",null),G=X.exports,K={user:{userId:null,name:"",email:"",city:"",country:"",isLoggedIn:!1}},Q={user:function(t){return t.user},isLoggedIn:function(t){return t.user.isLoggedIn}},W={setUserId:function(t,e){t.user.userId=e.userId},setName:function(t,e){t.user.name=e.name},setEmail:function(t,e){t.user.email=e.email},setCity:function(t,e){t.user.city=e.city},setCountry:function(t,e){t.user.country=e.country},login:function(){K.user.isLoggedIn=!0},logout:function(){K.user.isLoggedIn=!1,K.user.userId=null,K.user.name="",K.user.email="",K.user.city="",K.user.country=""}},Y={createUser:function(t,e){var i=t.commit;i("setName",e),i("setEmail",e),i("setCity",e),i("setCountry",e)},setUserId:function(t,e){var i=t.commit;i("setUserId",e)},setUserProfilePicture:function(t,e){var i=t.commit;i("setProfilePicture",e)},userLogin:function(t){var e=t.commit;e("login")},userLogout:function(t){var e=t.commit;e("logout")}},tt={state:K,actions:Y,mutations:W,getters:Q};r["default"].use(h["a"]);var et=new h["a"].Store({modules:{user:tt}});r["default"].use(a["a"]);var it=[{path:"/login",component:_,name:"Login"},{path:"/signup",component:D,name:"Sign Up"},{path:"/profile",component:$,name:"Profile"},{path:"/petitions",component:B,name:"Petitions"},{path:"/petitions/:petitionId",component:G,name:"Petition"}],rt=new a["a"]({routes:it,mode:"history"});function ot(){var t=localStorage.getItem("userId");et._actions.setUserId[0]({userId:parseInt(t)}),et._actions.userLogin[0](),nt(),g.refreshInstance()}function nt(){g.getUser(localStorage.getItem("userId")).then((function(t){et._actions.createUser[0](t.data)}))}rt.beforeEach((function(t,e,i){var r="/Signup"===t.path||"/Login"===t.path||"/signup"===t.path||"/login"===t.path,o="/Petitions"===t.path||"/petitions"===t.path||"Petition"===t.name,n="/"===e.path&&!r;null!==localStorage.getItem("sessionId")&&"null"!==localStorage.getItem("sessionId")||r||o?null!==localStorage.getItem("sessionId")&&"null"!==localStorage.getItem("sessionId")&&r?(ot(),i("/Profile")):n&&null!==localStorage.getItem("sessionId")&&"null"!==localStorage.getItem("sessionId")?(ot(),i()):"/"===t.path?i("/Login"):i():i("/Login")}));var st=rt,at={props:{source:String},data:function(){return{drawer:null,hasPicture:!1}},mounted:function(){this.printInfo()},computed:Object(s["a"])({},Object(h["c"])(["user"])),name:"App",methods:Object(s["a"])(Object(s["a"])({},Object(h["b"])(["userLogout"])),{},{logout:function(){localStorage.setItem("sessionId",null),localStorage.setItem("userId",null),g.logout().then(),this.userLogout(),st.push("/Login")},printInfo:function(){},userProfilePicture:function(){return this.hasProfilePicture(),"http://localhost:4941/api/v1/users/"+this.user.userId+"/photo"},hasProfilePicture:function(){var t=this;g.getProfilePicture(this.user.userId).then((function(){t.hasPicture=!0})).catch((function(){t.hasPicture=!1}))}})},ct=at,lt=(i("034f"),Object(P["a"])(ct,o,n,!1,null,null,null)),ut=lt.exports,dt=i("ce5b"),pt=i.n(dt);i("bf40");r["default"].use(pt.a);var vt={theme:{themes:{light:{primary:"#8bc34a",secondary:"#cddc39",accent:"#00bcd4",error:"#f44336",warning:"#ff9800",info:"#00bcd4",success:"#8bc34a"}}}},gt=new pt.a(vt);r["default"].config.productionTip=!1,new r["default"]({router:st,store:et,vuetify:gt,render:function(t){return t(ut)}}).$mount("#app")},"85ec":function(t,e,i){}});
//# sourceMappingURL=app.d430017d.js.map